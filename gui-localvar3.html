<!DOCTYPE html>
<html>
<body>
<h2 id="text1">Counter: 0</h2>
<button type="button" id="button1">Counter ++</button>
<h2 id="text2">Counter: 0</h2>
<button type="button" id="button2">Counter ++</button>
<h2 id="text3">Counter: 0</h2>
<button type="button" id="button3">Counter ++</button>
<script>
(function() {
    function makeCounter() {
        var count = 0;
        return function() {
            count = count + 1;
            return count;
        }
    }

    function setupCounter(index) {
        var button = document.getElementById("button" + index);
        var text = document.getElementById("text" + index);
        var counter = makeCounter();
        button.onclick = function main() {
            text.innerHTML = "Counter: " + counter();
        }
    }

    for( var i : [1,2,3] ) {
        setupCounter(i);
    }
    //    setupCounter(1);
    //    setupCounter(2);
    //    setupCounter(3);
})();
</script>
</body>
</html>
